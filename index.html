<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
    <title>Phaser - Making your first game, part 9</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
    <script src="./js/Level.js" type="text/javascript"></script>
    <script src="./js/Character.js" type="text/javascript"></script>
    <script src="./js/Bird.js" type="text/javascript"></script>
    <script src="./js/Keys.js" type="text/javascript"></script>
    <script src="./js/Joystick.js" type="text/javascript"></script>
    <script src="./js/Dead.js" type="text/javascript"></script>
</head>
<body>

<script type="text/javascript">

var dimensions = {};
if (window.innerWidth < 800) {
    dimensions.width = window.innerWidth;
} else {
    dimensions.width = 800;
}
if (window.innerHeight < 500) {
    dimensions.height = window.innerHeight;
} else {
    dimensions.height = 500;
}
var game = new Phaser.Game(dimensions.width, dimensions.height,  Phaser.AUTO, '', { preload: preload, create: create, update: update });

var character = null;
var level = null
var bird = null;
var keys = null;
var joystick = null;
var deadState = null;

function preload() {
    level = new Level(game);
    character = new Character(game, 100, this.game.world.height - 100, 150, 400);
    bird = new Bird(game);
    keys = new Keys(game);
    joystick = new Joystick(game, 60, dimensions.height - 60);
    deadState = new Dead(game);
    level.preload();
    character.preload();
    bird.preload();
    joystick.preload();
    //game.load.spritesheet('baddie', 'assets/baddie.png', 32, 32);
}


function create() {
    game.state.add("dead" , deadState);
    keys.create();
    level.create();
    character.create();
    bird.create();
    joystick.create();
    //game.input.onDown.add(goFull, this);

}

function update() {
    character.update();
    bird.update();
    joystick.update();
}

function goFull () {
    game.scale.fullScreenScaleMode = Phaser.ScaleManager.NO_SCALE;
    game.scale.refresh();
    game.scale.startFullScreen();
}
</script>

</body>
</html>